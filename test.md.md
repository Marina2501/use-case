# Оплата заказа

Цель: оплатить заказ<br/>
Акторы: незарегистрированный пользователь, система (сайт), банк<br/>
Контекст: когда пользователь выбрал блюда, он может оформить заказ<br/>
Предусловие: пользователь добавил блюда в корзину

## Основной сценарий (оплата через сайт):

1. ***пользователь*** открывает корзину с выбранными блюдами;
2. ***система*** отображает список блюд, стоимость каждого блюда, итоговую стоимость заказа и предлагает оформить заказ;
3. ***пользователь*** переходит к оформлению заказа, заполняет форму оформления заказа, выбирает оплату через сайт и подтверждает заказ [Возможность оплатить заказ через сайт](https://test-project-st.atlassian.net/browse/TP-26) [Выбор способа оплаты](https://test-project-st.atlassian.net/browse/TP-24);
4. ***система*** отображает форму для внесения данных карты пользователя;
5. ***пользователь*** вносит данные карты и оплачивает заказ;
6. ***система*** направляет в банк запрос на снятие денежных средств с карты пользователя в размере суммы заказа;
7. ***банк*** производит оплату и направляет сообщение системе об успешном проведении оплаты;
8. ***система*** фиксирует оформление заказа.

### Альтернативный сценарий (оплата курьеру при получении):

3. ***пользователь*** переходит к оформлению заказа, заполняет форму оформления заказа, выбирает оплату курьеру при получении и подтверждает заказ;
4. смотреть п.8 основного сценария.


### Исключение (недостаточно средств на карте пользователя):

7. ***банк*** отказывает в проведении оплаты в связи с отсутствием денежных средств на карте пользователя и направляет результат системе;
8. ***система*** отображает отказ в проведении оплаты в связи с отсутствием денежных средств на карте пользователя.
